{% extends 'common/index.html'%}

{% block content %}
<div class="row not-on-einstaklingsblod">
	<div class="col-md-6">
		<h3>Lykilorð nemenda</h3>
		<h4><a href="{{survey_id}}">{{survey_id}}</a></h4>
	</div>
	<div class="col-md-6 hidden-print">
		<a href="javascript:window.print()" class="btn btn-default">Prenta lista</a>
		<a href="javascript:printEinstaklingsblod()" class="btn btn-default">Prenta einstaklingsblöð</a>
	</div>
</div>
<div>
	<div id="survey_list">
		<div class="row not-on-einstaklingsblod">
			<div class="col-md-2 kt"><h4>Kennitala</h4></div>
			<div class="col-md-4 name"><h4>Nafn</h4></div>
			<div class="col-md-3 support"><h4>Stuðningur</h4></div>
			<div class="col-md-3 testcode"><h4>Lykilorð</h4></div>
		</div>
		{% for data in survey_login_students %}
		<div class="row">
			<div class="col-md-2 kt student-kt">{{data.student.ssn}}</div>
			<div class="col-md-4 name student-name">{{data.student.name}}</div>
			<div class="col-md-3 support not-on-einstaklingsblod">
				{% if data.student.exceptions_set.exists %}
					<a href="{% url 'supportandexception:exception' data.student.school_set.first.id data.student.id %}" title="Undanþágur"><span class="glyphicon glyphicon-flag" style="color:#449D44"></span>&nbsp;</a>
				{% endif %}
				{% if data.student.supportresource_set.exists %}
					<a href="{% url 'supportandexception:supportresource' data.student.school_set.first.id data.student.id %}" title="Stuðningsúrræði"><span class="glyphicon glyphicon-flag" style="color:#EC971F"></span>&nbsp;</a>
				{% endif %}
			</div>
			<div class="col-md-3 testcode student-testcode">{{data.survey_code}}</div>
		</div>
		{% endfor %}
	</div>
</div>
<script type="text/javascript">
	function printEinstaklingsblod() {
		$('.not-on-einstaklingsblod').addClass('hidden-print');
		$('.student-testcode').addClass('on-einstaklingsblod').prepend('<span class="removeme">Prófkóði: </span>');
		$('.student-kt').addClass('on-einstaklingsblod').prepend('<span class="removeme">Kennitala: </span>');
		$('.student-name').addClass('on-einstaklingsblod').prepend('<span class="removeme">Nafn: </span>');
		window.print();
		$('.removeme').remove();
		$('.on-einstaklingsblod').removeClass('on-einstaklingsblod');
		$('.not-on-einstaklingsblod').removeClass('hidden-print');
		$('.student-testcode').css('page-break-after','auto');
	}
</script>
{% endblock %}