{% extends 'common/index.html'%}
{% include staticfiles%}
{% block content %}

	<div class="row">
		<div class="col-md-12"><h3>Eru gögnin rétt?</h3></div>
	</div>
	<div class="row">
		<div class="col-md-2">
			<h3>Já</h3>
			<a class="btn btn-success" href="" id="save_data"><span class="glyphicon glyphicon-ok"></span>&nbsp;Vista gögn</a>
		</div>
		<div class="col-md-2">
			<h3>Nei</h3>
			<a class="btn btn-danger" href="{% url 'schools:example_survey_answer_admin_listing' %}"><span class="glyphicon glyphicon-remove"></span>&nbsp;Hætta við</a>
		</div>
	</div>
	{% if errors %}
	<div class="alert alert-danger">
		{% for error in errors %}
		<p><strong>Villa í röð {{error.row}}:</strong> {{error.text}}</p>
		{% endfor %}
	</div>
	{% endif %}
	<table class="table table-hover table-striped">
		<thead>
			<tr>
				<th>&nbsp;</th>
				<th>Kennitala</th>
				<th>Flýtikóði</th>
				<th>Próf</th>
				<th>Svar</th>
			</tr>
		</thead>
		<tbody>
			{% for entry in data %}
				<tr{% if entry.error %} class="danger"{% endif %}>
					<td>{{ forloop.counter }}</td>
					<td>{{ entry.ssn }}</td>
					<td>{{ entry.quickcode }}</td>
					<td>{{ entry.survey_identifier }}</td>
					<td>{{ entry.answer }}</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
{% endblock %}
{% block script %}
	<script type='text/javascript'>
		var data = {{data|safe}};
		$( document ).on("click", "#save_data", function(){
			$.ajax({
				type: "POST",
				url: '',
				data: {
					'csrfmiddlewaretoken': '{{ csrf_token }}',
					'newdata': JSON.stringify(data),
				},
			});
		});
	</script>
{% endblock %}